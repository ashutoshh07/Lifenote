<div class="group bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 
             hover:shadow-lg transition-all duration-200 cursor-pointer p-4 relative" (click)="onCardClick($event)">

    <!-- Pin Icon -->
    @if (note().isPinned) {
    <div class="absolute top-2 right-2">
        <lucide-icon [img]="PinIcon" class="w-4 h-4 text-yellow-500"></lucide-icon>
    </div>
    }

    <!-- Title -->
    <h3 class="font-semibold text-gray-900 dark:text-white text-lg mb-2 pr-6">
        {{ note().title || 'Untitled' }}
    </h3>

    <!-- Content Preview (first 100 chars) -->
    <p class="text-gray-600 dark:text-gray-400 text-sm line-clamp-3 mb-3">
        {{ getContentPreview() }}
    </p>

    <!-- Tags -->
    @if (note().tags && note().tags!.length > 0) {
    <div class="flex flex-wrap gap-1 mb-2">
        @for (tag of note().tags; track tag) {
        <span class="px-2 py-0.5 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 
                         text-xs rounded-full">
            #{{ tag }}
        </span>
        }
    </div>
    }

    <!-- Actions (show on hover) -->
    <div class="flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity mt-2">
        <button (click)="onEdit($event)" class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded" title="Edit">
            <lucide-icon [img]="EditIcon" class="w-4 h-4"></lucide-icon>
        </button>

        <button (click)="onTogglePin($event)" class="p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
            title="Pin">
            <lucide-icon [img]="PinIcon" class="w-4 h-4"></lucide-icon>
        </button>

        <button (click)="onDelete($event)" class="p-1.5 hover:bg-red-100 dark:hover:bg-red-900 rounded text-red-600"
            title="Delete">
            <lucide-icon [img]="TrashIcon" class="w-4 h-4"></lucide-icon>
        </button>
    </div>

    <!-- Date -->
    <div class="text-xs text-gray-400 mt-2">
        {{ formatDate(note().updatedAt || note().createdAt) }}
    </div>
</div>